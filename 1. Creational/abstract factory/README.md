# 抽象工廠 Abstract Factory
創建一系列相關的對象，而無需指定其具體類


## 優缺點
### 優點
1. 可以確保同一工廠生成的產品相互匹配

2. 可以避免客戶端和具體產品代碼的耦合
    
3. Single Responsibility Principle

    可以將產品生成代碼抽取到同一位置， 使得代碼易於維護

4. Open/Closed Principle

    向應用程序中引入新產品變體時， 你無需修改客戶端代碼

### 缺點
由於採用該模式需要向應用中引入眾多接口和類， 代碼可能會比之前更加複雜

## Architecture

![](https://refactoringguru.cn/images/patterns/diagrams/abstract-factory/structure.png)

1. 抽象產品(Abstract Product)

    為構成系列產品的一組不同但相關的產品聲明接口。

2. 具體產品(Concrete Products)
    
    * 是抽象產品的多種不同類型實現
    * 所有變體都必須實現相應的抽象產品

3. 抽象工廠(Abstract Factory)

    接口聲明了一組創建各種抽象產品的方法
    
4. 具體工廠(Concrete Factory)
    
    * 實現抽象工廠的構建方法
    * 每個具體工廠都對應特定產品變體，且僅創建此種產品變體
    
5. 客戶端(Client)
    
    * 只需通過抽象接口調用工廠和產品對象，就能與任何具體工廠/產品變體交互


## 應用場景
* 如果代碼需要與多個不同系列的相關產品交互， 
    但是由於無法提前獲取相關信息， 
    或者出於對未來擴展性的考慮， 
    你不希望代碼基於產品的具體類進行構建， 
    在這種情況下， 你可以使用抽象工廠
* 如果你有一個基於一組抽象方法的類， 且其主要功能因此變得不明確， 那麼在這種情況下可以考慮使用抽象工廠模式

## 實現方式
下列六個步驟
1. 以不同的產品類型與產品變體為維度繪製矩陣
    
2. 為所有產品聲明抽象產品接口
    
    讓所有具體產品類實現這些接口

3. 聲明抽象工廠接口， 並且在接口中為所有抽象產品提供一組構建方法

4. 為每種產品變體實現一個具體工廠類
5. 在應用程序中開發初始化代碼

    該代碼根據應用程序配置或當前環境， 對特定具體工廠類進行初始化
    然後將該工廠對像傳遞給所有需要創建產品的類        

6. 找出代碼中所有對產品構造函數的直接調用， 將其替換為對工廠對像中相應構建方法的調用